<app-modal [modalID]="'device_files'" [isClosable]="true">
  <div class="modal-form w-900">
    <div class="modal-form-header">
      <h4 class="text-title text-center">
        Файлы на устройстве {{ device?.name }}
      </h4>
      <hr class="divider" />
    </div>
    <div class="modal-form-body">
      <div class="row filters">
        <app-input-search
          [value]="searchTerm"
          (onChange)="onChangeSearchInputHandler($event)"
        ></app-input-search>
        <!--        <app-button-->
        <!--          class="files-filter-btn-all"-->
        <!--          [class.chosen]="displayFiles === 'all'"-->
        <!--          height="auto"-->
        <!--          padding="9px 14px"-->
        <!--          text="все"-->
        <!--          textLike="like-body"-->
        <!--          radius="14px"-->
        <!--          [color]="displayFiles === 'all' ? 'blue' : 'common'"-->
        <!--          (onCLick)="toggleFilesDisplay('all')"-->
        <!--        ></app-button>-->
        <!--        <app-button-->
        <!--          class="files-filter-btn-import"-->
        <!--          [class.chosen]="displayFiles === 'import'"-->
        <!--          height="auto"-->
        <!--          padding="9px 14px"-->
        <!--          text="импорт"-->
        <!--          textLike="like-body"-->
        <!--          radius="14px"-->
        <!--          [color]="displayFiles === 'import' ? 'blue' : 'common'"-->
        <!--          (onCLick)="toggleFilesDisplay('import')"-->
        <!--        ></app-button>-->
        <!--        <app-button-->
        <!--          class="files-filter-btn-export"-->
        <!--          [class.chosen]="displayFiles === 'export'"-->
        <!--          height="auto"-->
        <!--          padding="9px 14px"-->
        <!--          text="экспорт"-->
        <!--          textLike="like-body"-->
        <!--          radius="14px"-->
        <!--          [color]="displayFiles === 'export' ? 'blue' : 'common'"-->
        <!--          (onCLick)="toggleFilesDisplay('export')"-->
        <!--        ></app-button>-->
        <app-add-button
          class="add-btn"
          [title]="'добавить новый'"
          [target]="'add_file'"
        ></app-add-button>
      </div>
      <ng-container *ngIf="loading; else dummy">
        <div class="progress">
          <div class="indeterminate"></div>
        </div>
      </ng-container>
      <ng-template #dummy>
        <div class="dummy"></div>
      </ng-template>
      <div class="row space-between">
        <div class="list">
          <div class="list-header row space-between">
            <div class="sort-btn-wrapper">
              <app-sort-btn
                title="Название"
                [isSortAsc]="isNameSortAsc"
                (onCLick)="changeNameSortDir()"
              ></app-sort-btn>
            </div>
            <div class="sort-btn-wrapper">
              <app-sort-btn
                title="Размер"
                [isSortAsc]="isSizeSortAsc"
                (onCLick)="changeSizeSOrtDir()"
              ></app-sort-btn>
            </div>
            <div class="sort-btn-wrapper">
              <app-sort-btn
                title="Дата"
                [isSortAsc]="isDateSortAsc"
                (onCLick)="changeDateSortDir()"
              ></app-sort-btn>
            </div>
            <p class="text-body">Действия</p>
          </div>
          <div class="list-body">
            <ng-container
              *ngIf="
                device?.device_info?.files &&
                  device?.device_info?.files?.length !== 0;
                else nodata
              "
            >
              <div
                *ngFor="
                  let file of device.device_info.files
                    | search: searchTerm:'file'
                    | fileName: isNameSortAsc
                    | deviceFileSize: isSizeSortAsc
                    | fileDate: isDateSortAsc
                "
                class="list-item row space-between r-14"
              >
                <div class="name-wrapper">
                  <p
                    class="name"
                    (mouseenter)="displayTip()"
                    (mouseleave)="hideTip()"
                    #name
                  >
                    {{ file.name }}
                  </p>
                  <p class="list-tip" #tip>{{ file.name }}</p>
                </div>
                <p>{{ file.size | fileSize }}</p>
                <p>{{ file.lastUpdate | dateConverter }}</p>
                <div class="row space-between">
                  <app-file-action-btn
                    target="file_download"
                    (onClick)="onDownloadClickHandler(file)"
                  ></app-file-action-btn>
                  <!--                  <app-file-action-btn target="file_hide"></app-file-action-btn>-->
                  <app-file-action-btn
                    target="file_delete"
                    (onClick)="onDeleteClickHandler(file)"
                  ></app-file-action-btn>
                </div>
              </div>
            </ng-container>
          </div>
          <ng-template #nodata>
            <app-no-list-data></app-no-list-data>
          </ng-template>
        </div>
        <div class="preview-wrapper">
          <div class="preview r-14">
            <span class="text-choose">область просмотра</span>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-form-footer"></div>
  </div>
</app-modal>
